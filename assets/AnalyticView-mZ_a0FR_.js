import{r as u}from"./request-CfnqiL5Q.js";import{r,o as y,e as g,c as h,a as _,d as a,w as b,F as v,b as k}from"./index-BXVcyc2H.js";function C(){return u({url:"/bills",method:"get"})}function N(){return u({url:"/bills/rank",method:"get"})}function S(o){return u({url:`/bills/${o}`,method:"get"})}function x(o){return u({url:"/bills/list",method:"post",data:{page_num:o.pageNum,page_size:o.pageSize}})}const P={__name:"Bill",setup(o){const i=r([]),p=r([]),t=r({pageNum:2,pageSize:5}),m=r(0),s=async()=>{await x(t.value).then(e=>{i.value=e.data.data.list,m.value=e.data.data.total})},z=e=>{t.value.pageNum=1,t.value.pageSize=e,s()},f=e=>{t.value.pageNum=e,s()};y(()=>{s(),N().then(e=>{p.value=e.data.data})});const B=e=>{console.log(e.name),e.name==="总计"&&C().then(l=>{i.value=l.data.data}),S(e.name).then(l=>{i.value=l.data.data})};return(e,l)=>{const n=g("el-table-column"),c=g("el-table"),w=g("el-pagination");return _(),h(v,null,[a(c,{data:p.value,style:{width:"300px",height:"40vh","margin-bottom":"30px"},onRowClick:B},{default:b(()=>[a(n,{prop:"name",label:"商家",width:"180"}),a(n,{prop:"total_expense",label:"消费金额"})]),_:1},8,["data"]),a(c,{data:i.value,border:"",style:{width:"100%",height:"70vh"}},{default:b(()=>[a(n,{prop:"date",label:"交易时间",width:"180"}),a(n,{prop:"name",label:"商家",width:"180"}),a(n,{prop:"expense",label:"金额(元)",width:"180"}),a(n,{prop:"pay_method",label:"支付方式",width:"180"}),a(n,{prop:"receipt_payment",label:"收/支",width:"80"}),a(n,{prop:"description",label:"描述"})]),_:1},8,["data"]),a(w,{"current-page":t.value.pageNum,"onUpdate:currentPage":l[0]||(l[0]=d=>t.value.pageNum=d),"page-size":t.value.pageSize,"onUpdate:pageSize":l[1]||(l[1]=d=>t.value.pageSize=d),"page-sizes":[5,10,100,500],size:e.size,disabled:e.disabled,background:e.background,layout:"total, sizes, prev, pager, next, jumper",total:m.value,onSizeChange:z,onCurrentChange:f},null,8,["current-page","page-size","size","disabled","background","total"])],64)}}},D={__name:"AnalyticView",setup(o){return(i,p)=>(_(),h(v,null,[p[0]||(p[0]=k("div",null,"analytic",-1)),a(P)],64))}};export{D as default};
