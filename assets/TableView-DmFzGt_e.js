import{r as v}from"./request-CfnqiL5Q.js";import{r as f,o as L,e as r,c as x,a as D,b,d as l,u,i as k,w as o,f as _,F as A}from"./index-BXVcyc2H.js";function M(){return v({url:"/customer"})}function P(s){return v({url:"/customer",method:"post",data:s})}function Q(s,i){return v({url:`/customer/${s}`,method:"put",data:i})}function j(s){return v({url:`/customer/${s}`,method:"delete"})}function G(s){return v({url:"/customer",method:"delete",data:s})}const H={class:"table-box"},J={class:"query-box"},K={class:"dialog-footer"},O={__name:"Customer",setup(s){let i=f(""),m=f([]),V=f([]),d=f(!1),a=f({}),w=f("add");const C=()=>{location.reload()},U=n=>{V.value=[],n.forEach(e=>{V.value.push(e.ID)})},I=()=>{d.value=!0,a.value={}},T=n=>{d.value=!0,w.value="edit",a.value={...n}},N=async n=>{await j(n.ID),C()},$=async()=>{await G({ids:V.value}),C()},q=n=>{n.length>0?m.value=m.value.filter(e=>e.name.match(n)):C()},B=async()=>{if(d.value=!1,w.value==="add")await P(a.value);else if(w.value==="edit"){let n={name:a.value.name,state:a.value.state,address:a.value.address};await Q(a.value.ID,n)}C()};return L(()=>{M().then(n=>{m.value=n.data.data})}),(n,e)=>{const y=r("el-input"),p=r("el-button"),c=r("el-table-column"),E=r("el-table"),g=r("el-form-item"),h=r("el-option"),F=r("el-select"),R=r("el-form"),S=r("el-dialog");return D(),x("div",H,[e[12]||(e[12]=b("div",{class:"title"},[b("h2",null,"CURD")],-1)),b("div",J,[l(y,{modelValue:u(i),"onUpdate:modelValue":e[0]||(e[0]=t=>k(i)?i.value=t:i=t),style:{width:"240px"},placeholder:"查询名称",onInput:q},null,8,["modelValue"]),l(p,{type:"primary",onClick:I},{default:o(()=>[...e[6]||(e[6]=[_("新增",-1)])]),_:1}),l(p,{type:"danger",onClick:$},{default:o(()=>[...e[7]||(e[7]=[_("删除多选",-1)])]),_:1})]),l(E,{border:"",data:u(m),style:{width:"100%"},ref:"multipleTableRef",onSelectionChange:U},{default:o(()=>[l(c,{type:"selection",selectable:n.selectable,width:"55"},null,8,["selectable"]),l(c,{prop:"name",label:"姓名",width:"120"}),l(c,{prop:"state",label:"状态",width:"120"}),l(c,{prop:"address",label:"地址",width:"600"}),l(c,{fixed:"right",label:"操作","min-width":"120"},{default:o(t=>[l(p,{link:"",type:"primary",size:"small",onClick:z=>T(t.row)},{default:o(()=>[...e[8]||(e[8]=[_("编辑",-1)])]),_:1},8,["onClick"]),l(p,{link:"",type:"danger",size:"small",onClick:z=>N(t.row)},{default:o(()=>[...e[9]||(e[9]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(S,{modelValue:u(d),"onUpdate:modelValue":e[5]||(e[5]=t=>k(d)?d.value=t:d=t),width:"500",title:u(w)==="add"?"新增":"编辑"},{footer:o(()=>[b("div",K,[l(p,{onClick:e[4]||(e[4]=t=>k(d)?d.value=!1:d=!1)},{default:o(()=>[...e[10]||(e[10]=[_("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:B},{default:o(()=>[...e[11]||(e[11]=[_("确认",-1)])]),_:1})])]),default:o(()=>[l(R,{model:u(a)},{default:o(()=>[l(g,{label:"姓名","label-width":100},{default:o(()=>[l(y,{modelValue:u(a).name,"onUpdate:modelValue":e[1]||(e[1]=t=>u(a).name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(g,{label:"状态","label-width":100},{default:o(()=>[l(F,{modelValue:u(a).state,"onUpdate:modelValue":e[2]||(e[2]=t=>u(a).state=t),placeholder:"状态"},{default:o(()=>[l(h,{label:"在职",value:"在职"}),l(h,{label:"离职",value:"离职"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"地址","label-width":100},{default:o(()=>[l(y,{modelValue:u(a).address,"onUpdate:modelValue":e[3]||(e[3]=t=>u(a).address=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Y={__name:"TableView",setup(s){return(i,m)=>(D(),x(A,null,[m[0]||(m[0]=b("div",null,"Table",-1)),l(O)],64))}};export{Y as default};
